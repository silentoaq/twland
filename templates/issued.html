<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>憑證預授權已產生</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">
  <div class="container text-center">
    <h2 class="mb-4">憑證預授權已產生</h2>
    <p>掃描下方 QR code 或複製連結，讓 Holder 前往領取憑證：</p>

    <!-- QR code -->
    <img src="{{ qr_path }}" alt="QR code" class="img-thumbnail mb-3" style="max-width: 220px;">

    <!-- 顯示 Credential Offer 連結 -->
    <div class="mb-3">
      <input type="text" class="form-control text-center" value="{{ offer_url }}" id="offerLink" readonly>
    </div>

    <!-- 複製按鈕 -->
    <button class="btn btn-outline-primary" onclick="copyLink()">複製連結</button>

    <hr>
    <a href="/property/{{ session_id }}" class="btn btn-secondary mt-3">回上一頁</a>
  </div>

  <script>
    function copyLink() {
      const input = document.getElementById("offerLink");
      input.select();
      input.setSelectionRange(0, 99999); // For mobile
      navigator.clipboard.writeText(input.value).then(() => {
        alert("連結已複製到剪貼簿！");
      });
    }
  </script>
</body>
</html>