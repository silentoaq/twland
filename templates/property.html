<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <title>選擇房產</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      .property-card {
        transition: transform 0.2s ease;
        margin-bottom: 1rem;
      }
      .property-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
      }
      .certificate-number {
        font-family: monospace;
        background-color: #f8f9fa;
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
      }
    </style>
  </head>
  <body class="p-4">
    <div class="container">
      <div class="card shadow mb-4">
        <div class="card-header bg-primary text-white">
          <h2 class="mb-0">房產清單</h2>
        </div>
        <div class="card-body">
          <div class="alert alert-success">
            <h5>身份確認成功</h5>
            <p class="mb-0">
              姓名：<strong>{{ name }}</strong>（{{ id_number }}）
            </p>
          </div>

          {% if properties %}
          <div class="row mt-4">
            {% for p in properties %}
            <div class="col-md-6">
              <div class="card property-card border-primary">
                <div
                  class="card-header d-flex justify-content-between align-items-center"
                >
                  <span><strong>{{ p.property_id }}</strong></span>
                  <a
                    href="/issue/{{ session_id }}?property_id={{ p.property_id }}"
                    class="btn btn-success btn-sm"
                    >申請 VC</a
                  >
                </div>
                <div class="card-body">
                  <table class="table table-sm table-borderless mb-0">
                    <tr>
                      <th class="text-muted" width="35%">所有權人</th>
                      <td>{{ p.owner_name }}</td>
                    </tr>
                    <tr>
                      <th class="text-muted">土地標示</th>
                      <td>{{ p.land_number }}</td>
                    </tr>
                    <tr>
                      <th class="text-muted">建物標示</th>
                      <td>{{ p.building_number }}</td>
                    </tr>
                    <tr>
                      <th class="text-muted">權利範圍</th>
                      <td>{{ p.rights_portion }}</td>
                    </tr>
                    <tr>
                      <th class="text-muted">權狀字號</th>
                      <td>
                        <span class="certificate-number"
                          >{{ p.certificate_number }}</span
                        >
                      </td>
                    </tr>
                    <tr>
                      <th class="text-muted">坐落地址</th>
                      <td>{{ p.address }}</td>
                    </tr>
                    <tr>
                      <th class="text-muted">面積</th>
                      <td>
                        土地：{{ p.area.land }}，建物：{{ p.area.building }}
                      </td>
                    </tr>
                    <tr>
                      <th class="text-muted">用途</th>
                      <td>{{ p.use }}</td>
                    </tr>
                  </table>
                </div>
                <div class="card-footer bg-light">
                  <small class="text-muted"
                    >權狀核發日期：{{ p.certificate_date }}</small
                  >
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
          {% else %}
          <div class="alert alert-warning mt-4">查無名下房產紀錄。</div>
          {% endif %}
        </div>

        <!-- 統一導航區 -->
        <div class="card-footer">
          <div class="d-flex gap-2">
            <a href="/" class="btn btn-secondary">首頁</a>
            <a href="/issued" class="btn btn-secondary">已核發清單</a>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
