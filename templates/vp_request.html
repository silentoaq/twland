<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>請出示自然人憑證</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">
  <div class="container text-center">
    <h2 class="mb-4">請出示自然人 VC</h2>
    <p>請使用支援 OID4VP 的憑證皮夾掃描下方 QR code，或點擊連結以完成出示流程：</p>

    <!-- QR code -->
    <img src="{{ qr_path }}" alt="QR code" class="img-thumbnail mb-3" style="max-width: 220px;">

    <!-- 顯示 VP 連結 -->
    <div class="mb-3">
      <input type="text" class="form-control text-center" value="{{ vp_url }}" id="vpurl" readonly>
    </div>

    <!-- 複製按鈕 -->
    <button class="btn btn-outline-primary" onclick="copyLink()">複製連結</button>

    <hr>
    <div class="mt-3">
      <h5>OID4VP 規範說明</h5>
      <p class="text-muted small">本系統使用 OpenID for Verifiable Presentations (OID4VP) 規範，允許用戶安全地出示其自然人憑證。</p>
    </div>

    <a href="/" class="btn btn-secondary mt-3">回首頁</a>
  </div>

  <script>
    function copyLink() {
      const input = document.getElementById("vpurl");
      input.select();
      input.setSelectionRange(0, 99999); // For mobile
      navigator.clipboard.writeText(input.value).then(() => {
        alert("連結已複製到剪貼簿！");
      });
    }
  </script>
</body>
</html>